
<h1>Dados Profissionais - Etapa 3 de 4</h1>
<form #formEtapa3="ngForm" (ngSubmit)="etapa4()">
<div class="form-group">
    <label for="exampleSelect1">Escolha a categoria em seu serviço se enquadra:</label>
    <select name="valorSelectCategoria" ngModel
        class="form-control" id="exampleSelect1" autofocus required
        (focus)="onChangeSelectCategoria(formEtapa3.value.valorSelectCategoria)"
        (change)="onChangeSelectCategoria(formEtapa3.value.valorSelectCategoria)"
    >
      <option value="" disabled>Selecione uma categoria</option>
      <option *ngFor="let categoria of categorias" value="{{ categoria.nome }}">
        {{ categoria.nome }}
      </option>
    </select>
    <small class="form-text text-muted">
      Caso a categoria não exista envie um email para contato@portaldeservico.com.br para inclusão.
    </small>
</div>

  <div class="form-group">
      <label for="">Escolha o serviço que você vai prestar:</label>
      <select class="form-control" name="valorSelectServico" ngModel required>
          <option value="" disabled>Selecione um serviço</option>
        <option *ngFor="let servico of servicos" value="{{ servico.nome }}">
          {{ servico.nome }} 
        </option> 
      </select>
    </div>
         
  
  <div class="form-group">
      <label for="">Descreva o serviço que você prestar</label>
      <textarea class="form-control" name="descricao" ngModel rows="3" required></textarea>
      <small class="form-text text-muted">
        A descriçao vai aparecer nos anúncios na página prinicpal do site!
      </small>
  </div>
  
  
  <button type="button" class="btn btn-success"
    (click)="incluirServico(formEtapa3.value.valorSelectServico, formEtapa3.value.valorSelectCategoria)">
      Incluir servico
  </button>
  <small class="form-text text-muted" *ngIf="nr_servicos > 0">
      Você pode inclir até {{ nr_servicos }} servicos.
  </small>
  <small class="form-text vermelho" *ngIf="nr_servicos === 0">
      Você não pode mais incluir servicos.
  </small>
  <small class="form-text vermelho" *ngIf="formularioInvalido">
      E obrigatório os campos Categoria, Serviço e Descrição
  </small>
  <br>
  <div class="card" *ngIf="nr_servicos < 3">
    <div class="card-header">
      Serviços Inluídos
    </div>
    <div class="card-block">
        
            <table class="table">
                <tr *ngFor="let servico_incluido of servicos_incluidos">
                  <td #celulaID >{{servico_incluido.id}}</td>
                  <td>{{servico_incluido.categoria.nome}}</td>
                  <td>{{servico_incluido.nome}}</td>
                  <td><span (click)="removerServico(celulaID)"class="badge badge-danger">Remover</span></td>
                </tr>
            </table>
        
    </div>
  </div>
  
  <br> 
  <a class="btn btn-success" routerLink="../etapa2" role="button">Anterior</a>
  <a class="btn btn-success" routerLink="../etapa4" role="button">Próximo</a>
</form>
